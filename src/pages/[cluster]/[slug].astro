---
import { client } from '../../lib/sanity';
import { PortableText } from '@portabletext/react';
import Layout from '../../layouts/Layout.astro';

export const prerender = false;
const { slug } = Astro.params;

const post = await client.fetch(`*[_type == "caseStudy" && slug.current == $slug][0]{
  title,
  "content": body
}`, { slug });

if (!post) return Astro.redirect('/404');
---

<Layout title={post.title}>
  <article class="max-w-3xl mx-auto py-20 px-6">
    <h1 class="text-5xl font-black mb-10">{post.title}</h1>
    <div class="prose prose-lg">
      {post.content ? (
        <PortableText value={post.content} />
      ) : (
        <p>Cargando contenido...</p>
      )}
    </div>
  </article>
</Layout>
